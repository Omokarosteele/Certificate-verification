<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificate Verification ‚Äî Training Qualifications UK</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* DARK BLUE HEADER STYLES */
        .header {
            display: flex;
            align-items: center;
            padding: 25px 0;
            margin-bottom: 40px;
            flex-wrap: wrap;
            background: linear-gradient(135deg, #1a237e 0%, #283593 50%, #303f9f 100%);
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(26, 35, 126, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            width: 100%;
            padding: 0 40px;
            position: relative;
            z-index: 1;
        }
        
        .logo-container {
            margin-right: 30px;
            margin-bottom: 0;
        }
        
        .logo {
            max-height: 80px;
            width: auto;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }
        
        .header-text {
            flex: 1;
        }
        
        .header h1 {
            color: white;
            font-size: 2.2rem;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            font-weight: 700;
        }
        
        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
        
        .header-accent {
            height: 4px;
            background: linear-gradient(90deg, #4fc3f7 0%, #29b6f6 50%, #0288d1 100%);
            width: 100px;
            margin-top: 10px;
            border-radius: 2px;
        }
        
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 50px;
        }
        
        .content-section {
            flex: 1;
            min-width: 300px;
            padding: 30px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .form-section {
            flex: 1;
            min-width: 300px;
            padding: 30px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .verify-image {
            width: 100%;
            max-width: 500px;
            height: auto;
            border-radius: 8px;
            margin-bottom: 25px;
            display: block;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        
        p {
            margin-bottom: 20px;
            color: #555;
            font-size: 1.05rem;
        }
        
        .highlight-box {
            background-color: #f0f7ff;
            border-left: 4px solid #3498db;
            padding: 20px;
            margin: 25px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .highlight-box p {
            margin-bottom: 0;
            color: #2c3e50;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block; 
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input, select {
            width: 100%;
            padding: 14px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .verify-btn {
            background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
            color: white;
            border: none;
            padding: 16px 30px;
            font-size: 1.1rem;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .verify-btn:hover {
            background: linear-gradient(135deg, #283593 0%, #303f9f 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(26, 35, 126, 0.3);
        }
        
        .qr-section {
            text-align: center;
            margin-top: 40px;
            padding: 25px;
            background-color: #f9f9f9;
            border-radius: 10px;
        }
        
        .footer {
            text-align: center;
            padding: 25px;
            border-top: 1px solid #e1e5eb;
            color: #7f8c8d;
            font-size: 0.95rem;
            margin-top: 30px;
        }
        
        .footer-image {
            max-width: 300px;
            height: auto;
            margin-bottom: 20px;
        }
        
        .contact-info {
            margin-top: 15px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .footer-links {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .footer-links a {
            color: #1a237e;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: #283593;
            text-decoration: underline;
        }
        
        .camera-controls {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .camera-btn {
            background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 0.95rem;
        }
        
        .camera-btn.stop {
            background: linear-gradient(135deg, #d32f2f 0%, #f44336 100%);
        }
        
        .camera-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(26, 35, 126, 0.2);
        }
        
        .permission-notice {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        
        .no-camera {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            display: none;
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                gap: 30px;
            }
            
            .content-section, .form-section {
                padding: 25px;
            }
            
            .header {
                flex-direction: column;
                text-align: center;
                padding: 20px 0;
            }
            
            .header-content {
                flex-direction: column;
                padding: 0 20px;
            }
            
            .logo-container {
                margin-right: 0;
                margin-bottom: 20px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            .footer-image {
                max-width: 250px;
            }
            
            
            .header-accent {
                margin: 10px auto 0 auto;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 15px;
            }
            
            .content-section, .form-section {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 1.6rem;
            }
            
            .footer-image {
                max-width: 200px;
            }
            
            .camera-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .camera-btn {
                width: 100%;
                max-width: 200px;
            }
            
            .header {
                padding: 15px 0;
            }
            
            .header-content {
                padding: 0 15px;
            }
        }
        
        /* Notification styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 6px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
    </style>
</head>
<body>
    <!-- DARK BLUE HEADER -->
    <div class="header">
        <div class="header-content">
            <div class="logo-container">
                <!-- Your logo image -->
                <img src="logo.png" alt="TQUK Logo" class="logo">
            </div>
            <div class="header-text">
                <h1>Certificate Verification</h1>
                <p>Training Qualifications UK</p>
                <div class="header-accent"></div>
            </div>
        </div>
    </div>
    
    <!-- Your verification image below the header -->
    <div style="text-align: center; margin-bottom: 30px;">
        <img src="verify.png" alt="Certificate Verification" class="verify-image">
    </div>
    
    <div class="container">
        <div class="content-section">
            <h2>Verify Your Certificate</h2>
            <p>Certificate verification helps employers, educational institutions and other stakeholders have confidence in the credibility of your achievements.</p>
            
            <p>Fill your details into the form on the right or scan the QR code in the bottom left of your certificate to verify it in seconds.</p>
            
            <div class="highlight-box">
                <p><strong>Important Note:</strong> Only certificates issued from 2018 onwards can be checked below. If your certificate is dated before 2018, please contact our Customer Service Specialists, who can support you with verifying your certificate.</p>
            </div>
            
            <div class="qr-section">
                <h3>QR Code Scanner</h3>
                <p>Point your camera at a QR code from a TQUK certificate</p>
                
                <!-- Camera Permission Notice -->
                <div class="permission-notice" id="permissionNotice">
                    <strong>üì∏ Camera Access Required:</strong> This scanner needs camera access to work. Click "Start Scanner" and allow camera permissions when prompted.
                </div>
                
                <!-- No Camera Support -->
                <div class="no-camera" id="noCamera">
                    <strong>‚ö†Ô∏è Camera Not Available:</strong> Your device doesn't support camera access or camera permissions are blocked. Please use manual form entry instead.
                </div>
                
                <!-- Video Container -->
                <div id="video-container" style="display: none;">
                    <video id="video" playsinline></video>
                    <canvas id="canvas"></canvas>
                    <div class="scanner-overlay">
                        <div class="scanner-frame">
                            <div class="scanner-line"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Camera Controls -->
                <div class="camera-controls">
                    <button class="camera-btn" id="startScanner">Start Scanner</button>
                    <button class="camera-btn stop" id="stopScanner" style="display: none;">Stop Scanner</button>
                    <button class="camera-btn" id="switchCamera" style="display: none;">Switch Camera</button>
                </div>
                
                <!-- QR Scan Results -->
                <div class="qr-result" id="qrResult">
                    <h4>‚úÖ Scan Result:</h4>
                    <p id="qrResultText">No QR code scanned yet</p>
                    <button class="verify-btn" id="useScannedData" style="display: none; margin-top: 10px; padding: 10px 20px;">
                        Use This Certificate Data
                    </button>
                </div>
                
                <p style="margin-top: 15px; font-size: 0.9rem; color: #666;">
                    <strong>üí° Tip:</strong> Hold your phone steady and ensure good lighting for best results
                </p>
            </div>
        </div>
        
        <div class="form-section">
            <h2>Verification Form</h2>
            <p>Enter your certificate details below to verify its authenticity.</p>
            
            <form id="verificationForm">
                <div class="form-group">
                    <label for="certificateNumber">Certificate Number *</label>
                    <input type="text" id="certificateNumber" name="certificateNumber" placeholder="Enter your certificate number" required>
                </div>
                
                <div class="form-group">
                    <label for="learnerName">Learner's Full Name *</label>
                    <input type="text" id="learnerName" name="learnerName" placeholder="Enter name as shown on certificate" required>
                </div>
                
                <div class="form-group">
                    <label for="dob">Date of Birth *</label>
                    <input type="date" id="dob" name="dob" required>
                </div>
                
                <div class="form-group">
                    <label for="certificateDate">Certificate Issue Date *</label>
                    <input type="date" id="certificateDate" name="certificateDate" required>
                </div>
                
                <div class="form-group">
                    <label for="qualification">Qualification Type</label>
                    <select id="qualification" name="qualification">
                        <option value="">Select qualification type</option>
                        <option value="level1">Level 1 Award</option>
                        <option value="level2">Level 2 Certificate</option>
                        <option value="level3">Level 3 Diploma</option>
                        <option value="level4">Level 4 Higher Diploma</option>
                        <option value="level5">Level 5 Foundation Degree</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <button type="submit" class="verify-btn">Verify Certificate</button>
            </form>
            
            <div class="highlight-box" style="margin-top: 30px;">
                <p><strong>Need help?</strong> If you're having trouble verifying your certificate, please contact our support team with your certificate details.</p>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <!-- Your footer image -->
        <img src="foot.png" alt="TQUK Footer" class="footer-image">
        
        <p>Training Qualifications UK</p>
        <p class="contact-info">Email: support@tquk.org | Phone: +44 (0)1234 567890</p>
        
        <div class="footer-links">
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
            <a href="#">Contact Us</a>
            <a href="#">About TQUK</a>
            <a href="#">FAQ</a>
        </div>
        
        <p style="margin-top: 25px;">¬© 2023 Training Qualifications UK. All rights reserved.</p>
    </div>

    <script>
        // QR Scanner Variables
        let videoStream = null;
        let mediaStream = null;
        let currentFacingMode = 'environment'; // Start with back camera
        let isScanning = false;
        let scanInterval = null;
        
        // DOM Elements
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const videoContainer = document.getElementById('video-container');
        const startBtn = document.getElementById('startScanner');
        const stopBtn = document.getElementById('stopScanner');
        const switchBtn = document.getElementById('switchCamera');
        const permissionNotice = document.getElementById('permissionNotice');
        const noCameraMsg = document.getElementById('noCamera');
        
        // Check for camera support on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkCameraSupport();
            
            // Set up event listeners
            startBtn.addEventListener('click', startScanner);
            stopBtn.addEventListener('click', stopScanner);
            switchBtn.addEventListener('click', switchCamera);
            document.getElementById('useScannedData').addEventListener('click', useScannedData);
            
            // Form submission
            document.getElementById('verificationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                verifyCertificateManually();
            });
            
            // Date restrictions
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('certificateDate').setAttribute('max', today);
            
            const minDOB = new Date();
            minDOB.setFullYear(minDOB.getFullYear() - 100);
            document.getElementById('dob').setAttribute('min', minDOB.toISOString().split('T')[0]);
            document.getElementById('dob').setAttribute('max', today);
        });
        
        // Check if camera is supported
        function checkCameraSupport() {
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                showNotification('Your browser does not support camera access.', 'error');
                permissionNotice.style.display = 'none';
                noCameraMsg.style.display = 'block';
                startBtn.disabled = true;
                return false;
            }
            return true;
        }
        
        // Start QR Code Scanner
        async function startScanner() {
            if (isScanning) return;
            
            if (!checkCameraSupport()) {
                return;
            }
            
            try {
                showNotification('Starting camera... Please allow camera access.', 'info');
                
                // Get camera stream
                const constraints = {
                    video: {
                        facingMode: currentFacingMode,
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    },
                    audio: false
                };
                
                mediaStream = await navigator.mediaDevices.getUserMedia(constraints);
                video.srcObject = mediaStream;
                videoStream = mediaStream.getVideoTracks()[0];
                
                // Wait for video to be ready
                video.onloadedmetadata = () => {
                    video.play();
                    
                    // Show video container
                    videoContainer.style.display = 'block';
                    
                    // Update UI
                    startBtn.style.display = 'none';
                    stopBtn.style.display = 'inline-block';
                    switchBtn.style.display = 'inline-block';
                    permissionNotice.style.display = 'none';
                    noCameraMsg.style.display = 'none';
                    
                    isScanning = true;
                    
                    // Start scanning for QR codes
                    scanInterval = setInterval(scanQRCode, 500);
                    
                    showNotification('Camera started. Point at a QR code.', 'success');
                };
                
            } catch (error) {
                console.error('Camera error:', error);
                
                if (error.name === 'NotAllowedError') {
                    showNotification('Camera access denied. Please allow camera permissions.', 'error');
                    permissionNotice.style.display = 'block';
                } else if (error.name === 'NotFoundError') {
                    showNotification('No camera found on your device.', 'error');
                    noCameraMsg.style.display = 'block';
                    permissionNotice.style.display = 'none';
                } else {
                    showNotification('Failed to access camera: ' + error.message, 'error');
                }
                
                startBtn.style.display = 'inline-block';
                stopBtn.style.display = 'none';
                switchBtn.style.display = 'none';
            }
        }
        
        // Stop QR Code Scanner
        function stopScanner() {
            if (!isScanning) return;
            
            // Stop scanning interval
            if (scanInterval) {
                clearInterval(scanInterval);
                scanInterval = null;
            }
            
            // Stop video stream
            if (mediaStream) {
                mediaStream.getTracks().forEach(track => track.stop());
                mediaStream = null;
                videoStream = null;
                video.srcObject = null;
            }
            
            // Update UI
            videoContainer.style.display = 'none';
            startBtn.style.display = 'inline-block';
            stopBtn.style.display = 'none';
            switchBtn.style.display = 'none';
            isScanning = false;
            
            showNotification('Camera stopped.', 'info');
        }
        
        // Switch between front and back cameras
        async function switchCamera() {
            if (!isScanning) return;
            
            try {
                // Stop current stream
                if (mediaStream) {
                    mediaStream.getTracks().forEach(track => track.stop());
                }
                
                // Switch facing mode
                currentFacingMode = currentFacingMode === 'environment' ? 'user' : 'environment';
                
                // Get new stream
                const constraints = {
                    video: {
                        facingMode: currentFacingMode,
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    },
                    audio: false
                };
                
                mediaStream = await navigator.mediaDevices.getUserMedia(constraints);
                video.srcObject = mediaStream;
                videoStream = mediaStream.getVideoTracks()[0];
                
                showNotification(`Switched to ${currentFacingMode === 'environment' ? 'back' : 'front'} camera`, 'success');
            } catch (error) {
                console.error('Switch camera error:', error);
                showNotification('Failed to switch camera.', 'error');
            }
        }
        
        // Scan for QR codes in video stream
        function scanQRCode() {
            if (!isScanning || !video.videoWidth) return;
            
            // Set canvas dimensions to match video
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            // Draw video frame to canvas
            const context = canvas.getContext('2d');
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            // Get image data from canvas
            const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
            
            // Simple QR code detection (simulated)
            // In a real app, you would use a QR decoding library like jsQR
            detectQRCode(imageData);
        }
        
        // Simulated QR code detection
        function detectQRCode(imageData) {
            // This is a simulation - in reality, you'd use a QR library
            // For demo purposes, we'll simulate detection with a button
            
            // Show simulated QR code option for testing
            const testBtn = document.getElementById('testQR');
            if (!testBtn) {
                const testButton = document.createElement('button');
                testButton.id = 'testQR';
                testButton.className = 'camera-btn';
                testButton.textContent = 'Test with Demo QR Code';
                testButton.style.marginTop = '10px';
                testButton.onclick = simulateQRScan;
                document.querySelector('.camera-controls').appendChild(testButton);
            }
        }
        
        // Simulate a QR code scan for testing
        function simulateQRScan() {
            if (!isScanning) {
                showNotification('Please start the scanner first.', 'warning');
                return;
            }
            
            // Simulate scanning a QR code
            const demoData = {
                certNumber: "TQUK-" + Math.floor(Math.random() * 1000000),
                name: "John Smith",
                dob: "1995-08-15",
                issueDate: "2023-11-30",
                qualification: "Level 3 Diploma"
            };
            
            onQRScanSuccess(JSON.stringify(demoData));
        }
        
        // Handle QR code scan success
        function onQRScanSuccess(decodedText) {
            // Show result
            const resultDiv = document.getElementById('qrResult');
            const resultText = document.getElementById('qrResultText');
            const useDataBtn = document.getElementById('useScannedData');
            
            try {
                const certData = JSON.parse(decodedText);
                resultText.innerHTML = `
                    <strong>Certificate Found:</strong><br>
                    <strong>Number:</strong> ${certData.certNumber}<br>
                    <strong>Name:</strong> ${certData.name}<br>
                    <strong>Issue Date:</strong> ${certData.issueDate}
                `;
                
                useDataBtn.style.display = 'inline-block';
                useDataBtn.setAttribute('data-cert-data', decodedText);
                
                showNotification('QR Code scanned successfully!', 'success');
                
                // Auto-populate form after 1 second
                setTimeout(() => {
                    populateFormFromQR(certData);
                }, 1000);
                
            } catch (error) {
                // If not JSON, show raw text
                resultText.textContent = decodedText;
                useDataBtn.style.display = 'none';
                showNotification('QR code scanned, but format not recognized.', 'warning');
            }
            
            resultDiv.style.display = 'block';
        }
        
        // Populate form with scanned data
        function useScannedData() {
            const btn = document.getElementById('useScannedData');
            const certDataStr = btn.getAttribute('data-cert-data');
            
            try {
                const certData = JSON.parse(certDataStr);
                populateFormFromQR(certData);
                showNotification('Form populated with scanned data!', 'success');
            } catch (error) {
                showNotification('Error parsing certificate data.', 'error');
            }
        }
        
        // Fill form fields with QR code data
        function populateFormFromQR(data) {
            if (data.certNumber) {
                document.getElementById('certificateNumber').value = data.certNumber;
            }
            if (data.name) {
                document.getElementById('learnerName').value = data.name;
            }
            if (data.dob) {
                document.getElementById('dob').value = data.dob;
            }
            if (data.issueDate) {
                document.getElementById('certificateDate').value = data.issueDate;
            }
            if (data.qualification) {
                const qualValue = data.qualification.toLowerCase().includes('level') ? 
                    data.qualification.toLowerCase().replace(/\s+/g, '') : '';
                document.getElementById('qualification').value = qualValue;
            }
            
            // Scroll to form
            document.querySelector('.form-section').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Manual form verification
        function verifyCertificateManually() {
            const certNumber = document.getElementById('certificateNumber').value;
            const learnerName = document.getElementById('learnerName').value;
            const dob = document.getElementById('dob').value;
            const certDate = document.getElementById('certificateDate').value;
            
            // Simple validation
            if (!certNumber || !learnerName || !dob || !certDate) {
                showNotification('Please fill in all required fields.', 'error');
                return;
            }
            
            // Check if certificate date is before 2018
            const certYear = new Date(certDate).getFullYear();
            if (certYear < 2018) {
                showNotification('Certificates issued before 2018 cannot be verified through this system. Please contact our Customer Service Specialists for assistance.', 'warning');
                return;
            }
            
            // Simulate verification
            showNotification('Verifying certificate... Please wait.', 'info');
            
            setTimeout(() => {
                const isValid = Math.random() > 0.3;
                
                if (isValid) {
                    showNotification(`Certificate #${certNumber} verified successfully! This certificate is valid and authentic.`, 'success');
                } else {
                    showNotification(`Certificate #${certNumber} could not be verified. Please check the details and try again, or contact support.`, 'error');
                }
            }, 1500);
        }
        
        // Notification function
        function showNotification(message, type) {
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            const notification = document.createElement('div');
            notification.className = `notification`;
            notification.textContent = message;
            
            // Set color based on type
            if (type === 'success') {
                notification.style.backgroundColor = '#27ae60';
            } else if (type === 'error') {
                notification.style.backgroundColor = '#e74c3c';
            } else if (type === 'warning') {
                notification.style.backgroundColor = '#f39c12';
            } else {
                notification.style.backgroundColor = '#3498db';
            }
            
            document.body.appendChild(notification);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 5000);
        }
        
        // Clean up on page unload
        window.addEventListener('beforeunload', function() {
            stopScanner();
        });
        
        // Handle page visibility change
        document.addEventListener('visibilitychange', function() {
            if (document.hidden && isScanning) {
                stopScanner();
            }
        });
    </script>
</body>
</html>